function xHeaderSearch(){if(document.querySelector("body > .brx-body.iframe"))return;let e,t,r=s(function t(){clearTimeout(e),e=setTimeout(l,50)},50),a=s(function e(){clearTimeout(t),t=setTimeout(l,50)},50);function s(e,t){let r;return function(){let a=this,s=arguments;clearTimeout(r),r=setTimeout(()=>e.apply(a,s),t)}}function l(){document.querySelector("#brx-header .x-search-form [data-brx-ls-wrapper]")&&document.querySelector("#brx-header div.x-search-form").style.setProperty("--x-header-height",document.querySelector("#brx-header .x-search-form [data-brx-ls-wrapper]").getBoundingClientRect().top+"px")}document.querySelector("#brx-header")&&document.querySelector("#brx-header div.x-search-form")&&(document.addEventListener("bricks/ajax/query_result/displayed",l),l()),document.querySelectorAll(".brxe-xheadersearch").forEach(e=>{function t(t){t.preventDefault(),"false"===e.querySelector('[class^="x-header-search_toggle"]').getAttribute("aria-expanded")?function t(){e.querySelectorAll('[class^="x-header-search_toggle"]:not(.x-header-search_toggle-open-text)').forEach(t=>{t.setAttribute("aria-expanded","true"),document.body.classList.add("x-header-search-open"),e.dispatchEvent(new Event("x_header_search:open")),document.addEventListener("keydown",l),document.addEventListener("click",n)});let r=e.querySelector("input[type=search]"),a=/iPad|iPhone|iPod/.test(navigator.userAgent)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1;if(a&&e.hasAttribute("data-ios-focus")){let s=document.createElement("input");s.type="search",s.style.display="block",s.style.opacity="0",s.style.position="fixed",s.style.left="-9999px",s.style.top="0",s.style.pointerEvents="none",s.style.height="1px",s.style.width="1px",s.setAttribute("aria-hidden","true"),s.setAttribute("tabindex","-1"),document.body.appendChild(s),s.focus({preventScroll:!0}),r&&setTimeout(function(){r.click(),r.focus({preventScroll:!0})},200)}else r&&setTimeout(function(){r.focus({preventScroll:!0})},50)}():s()}function s(t=!0){e.querySelectorAll('[class^="x-header-search_toggle"]:not(.x-header-search_toggle-open-text)').forEach(t=>{t.setAttribute("aria-expanded","false"),document.body.classList.remove("x-header-search-open"),e.dispatchEvent(new Event("x_header_search:close")),document.removeEventListener("keydown",l),document.removeEventListener("click",n)}),setTimeout(()=>{if(e.querySelector(".brx-ls-active")&&e.querySelector(".brx-ls-active").classList.remove("brx-ls-active"),e.querySelector(".brxe-filter-search")){e.querySelector("input[data-brx-filter]")&&(e.querySelector("input[data-brx-filter]").value="");let t=!1;if(e.querySelector(".brxe-filter-search").hasAttribute("id"))t=e.querySelector(".brxe-filter-search").id.split("-")[1];else if(e.querySelector(".brxe-filter-search [data-brx-filter][name]")){let r=e.querySelector(".brxe-filter-search [data-brx-filter]").getAttribute("name");t=!!r&&r.split("-").pop()}bricksData.filterInstances[t]&&(bricksData.filterInstances[t].currentValue="")}},200),t&&e.querySelector(".x-header-search_toggle-open").focus()}function l(e){("Escape"===e.key||"Esc"===e.key)&&s()}function n(e){e.target.hasAttribute("data-brx-ls-wrapper")&&s(!1),e.target.closest(".brxe-xheadersearch")||s(!1)}e.querySelector(".x-header-search_toggle-open")&&e.querySelector(".x-header-search_toggle-open").addEventListener("click",t),e.querySelector(".x-header-search_toggle-close")&&e.querySelector(".x-header-search_toggle-close").addEventListener("click",t);let c=e.querySelectorAll("a[href], button, input, textarea, select, details, [tabindex]");c.length&&(c[c.length-1].addEventListener("keydown",e=>{e.shiftKey||"Tab"!==e.key||e.target.classList.contains("x-header-search_toggle-open")||(e.preventDefault(),c[0].focus())}),c[0].addEventListener("keydown",e=>{e.shiftKey&&"Tab"===e.key&&!e.target.classList.contains("x-header-search_toggle-open")&&(e.preventDefault(),c[c.length-1].focus())})),e.hasAttribute("data-x-prevent-scroll")&&(e.addEventListener("x_header_search:open",()=>{document.documentElement.classList.add("x-header-search_prevent-scroll_"+e.id),"undefined"!=typeof lenis&&lenis.stop(),e.querySelector("[data-brx-ls-wrapper] > .brxe-container")&&(window.addEventListener("resize",r,!1),window.addEventListener("scroll",a,!1),e.querySelector("[data-brx-ls-wrapper] > .brxe-container").addEventListener("scroll",a,!1))}),e.addEventListener("x_header_search:close",()=>{document.documentElement.classList.remove("x-header-search_prevent-scroll_"+e.id),"undefined"!=typeof lenis&&lenis.start(),e.querySelector("[data-brx-ls-wrapper] > .brxe-container")&&(window.removeEventListener("resize",r,!1),window.removeEventListener("scroll",a,!1),e.querySelector("[data-brx-ls-wrapper] > .brxe-container").removeEventListener("scroll",a,!1))}));let o=e.querySelector("input[data-brx-filter]");if(e.hasAttribute("data-search-redirect")&&o){let i=e.querySelector("[data-x-search]").getAttribute("data-x-search"),d=i?JSON.parse(i):{};o.addEventListener("keydown",e=>{if("Enter"===e.key){let t=o.value,r=window.location.origin,a=encodeURIComponent(t).replace(/%20/g,"+");null!=d.postTypes&&d.postTypes.forEach(e=>{a+="&"+encodeURIComponent("post_type[]")+"="+e});let s=`${r}/?s=${a}`;window.location.replace(s)}})}})}document.addEventListener("DOMContentLoaded",function(e){bricksIsFrontend&&xHeaderSearch()});