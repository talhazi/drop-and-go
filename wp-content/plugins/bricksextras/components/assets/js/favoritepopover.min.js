function xFavoritePopover(){let e=function(e){e.querySelectorAll(".brxe-xfavorite[data-x-tooltip]").forEach(e=>{let t=e.getAttribute("data-x-favorite"),o=t?JSON.parse(t):{},r=e.getAttribute("data-x-type"),n,a,d=o.tooltipAddedText,i=o.disabledText,l=new DOMParser,s=l.parseFromString(i,"text/html"),c=s.body.textContent,v=c;e.querySelector(".x-favorite_added")||(d=o.removedText),"remove"===r&&(d=o.removeTooltipText),"clear"===r&&(d=o.clearTooltipText),e.querySelector(".x-favorite[disabled]")&&(d=v),document.querySelector("body > .brx-body.iframe")?(a=e.querySelector(".x-favorite"),n={render(t){let o=e.querySelector("[data-tippy-root]");return{popper:o}},allowHTML:!0,interactive:!0,arrow:!0,trigger:"click",appendTo:e.querySelector(".x-favorite-tooltip-content"),placement:o.placement,maxWidth:"none",animation:"extras",theme:"extras",touch:!0,offset:[o.offsetSkidding,o.offsetDistance]}):(a=e.querySelector(".x-favorite"),n={content:d,allowHTML:!0,interactive:!0,arrow:!0,trigger:"mouseenter focus click",appendTo:e,placement:o.placement,maxWidth:"none",animation:"extras",theme:"extras",touch:["hold",1e3],interactiveDebounce:50,followCursor:"false"!==o.followCursor&&o.followCursor,delay:o.delay,offset:[o.offsetSkidding,o.offsetDistance],onShow(t){tippy.hideAll({exclude:t}),e.addEventListener("keydown",function(e){("Escape"===e.key||"Esc"===e.key)&&t.hide()});let o=function(){t.hide()};window.addEventListener("scroll",o,{passive:!0});let r=t.props.onHide;t.setProps({onHide(e){window.removeEventListener("scroll",o),r&&r(e)}})}});let x=e.dataset.xId;if(o.isLooping&&(x=e.dataset.xId+"_"+o.isLooping),void 0!==window.xFavoriteTippy.Instances[x])return;let p=tippy(a,n);function u(){p.setContent(o.tooltipAddedText),tippy.currentInput.isTouch&&p.show()}function f(){"remove"!==r&&(tippy.currentInput.isTouch?p.setContent(o.removedTooltipText):p.setContent(o.removedText),tippy.currentInput.isTouch&&p.show())}window.xFavoriteTippy.Instances[x]=p,e.addEventListener("x_favorite:added",u),e.addEventListener("x_favorite:also-added",u),e.addEventListener("x_favorite:removed",f),e.addEventListener("x_favorite:also-removed",f),e.addEventListener("x_favorite:cleared",e=>{"clear"===r?(p.setContent(o.clearedTooltipText),tippy.currentInput.isTouch&&p.show()):"add_remove"===r&&o.removedText&&p.setContent(o.removedText)}),e.addEventListener("x_favorite:maximum-reached",()=>{"add_remove"===r&&(o.maxReachedTooltipText&&(p.setContent(o.maxReachedTooltipText),p.show(),p.setProps({onHidden(e){e.setContent(d)}})),tippy.currentInput.isTouch&&p.show())}),window.addEventListener("x_favorite:disallowed",e=>{p.setContent(v)}),"clear"===r&&window.addEventListener("x_favorite:updated",e=>{let t=e.detail.postType,r=e.detail.data;""==r[t]?p.setContent(o.clearedTooltipText):p.setContent(o.clearTooltipText)}),window.addEventListener("x_favorite:allowed",t=>{d=e.querySelector(".x-favorite_added")?o.tooltipAddedText:o.removedText,"remove"===r&&(d=o.removeTooltipText),"clear"===r&&(d=o.clearTooltipText),p.setContent(d)})})};e(document),xExtrasRegisterAJAXHandler("doExtrasFavoritePopover"),window.doExtrasFavoritePopover=e}document.addEventListener("DOMContentLoaded",function(e){bricksIsFrontend&&xFavoritePopover()});