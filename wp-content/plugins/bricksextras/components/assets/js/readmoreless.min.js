/*!
 *  @preserve
 * 
 * Readmore.js plugin
 * Author: @jed_foster
 * Project home: jedfoster.com/Readmore.js
 * Version: 3.0.0-beta-1
 * Licensed under the MIT license
 * 
 * Debounce function from davidwalsh.name/javascript-debounce-function
*/ function xReadMoreLess(){if(document.querySelector("body > .brx-body.iframe"))return;let e=function(e,t=!1){e.querySelectorAll(".brxe-xreadmoreless").forEach(e=>{if(t&&e.querySelector(".x-read-more_content[id]"))return;let r=e.getAttribute("data-x-readmore"),o=r?JSON.parse(r):{},n=e.querySelector(".x-read-more_content");openText=o.moreText?o.moreText:"",closeText=o.lessText?o.lessText:"",moreAria=o.moreAria?o.moreAria:"",lessAria=o.lessAria?o.lessAria:"";let a="";null!=o.icon&&(a="svg"===o.icon.library?'<span class="x-read-more_link-icon">'+e.nextSibling.innerHTML+"</span>":'<span class="x-read-more_link-icon"><i class="'+o.icon.icon+'"></i></span>');let i='<button aria-expanded="false" aria-label="'+moreAria+'" class=x-read-more_link><span class="x-read-more_link-text">'+openText+"</span>"+a+"</button>",l='<button aria-expanded="true" aria-label="'+lessAria+'" class=x-read-more_link><span class="x-read-more_link-text">'+closeText+"</span>"+a+"</button>",s;e.querySelector(".x-read-more_link")&&e.querySelector(".x-read-more_link").remove(),s=new Readmore(n,{speed:o.speed?parseInt(o.speed):300,moreLink:i,lessLink:l,embedCSS:!1,collapsedHeight:parseInt(e.style.maxHeight),heightMargin:o.heightMargin?parseInt(o.heightMargin):20,beforeToggle:function(t,r,o){document.dispatchEvent(new Event("x_readmore:before_toggle")),o?(n.classList.remove("x-read-more_expand"),e.dispatchEvent(new Event("x_readmore:collapse"))):(n.classList.add("x-read-more_expand"),e.dispatchEvent(new Event("x_readmore:expand")))},afterToggle:function(t,r,o){o?(e.dispatchEvent(new Event("x_readmore:expanded")),e.querySelector(".x-read-more_link")&&e.querySelector(".x-read-more_link").focus({preventScroll:!0})):(e.dispatchEvent(new Event("x_readmore:collapsed")),e.querySelector(".x-read-more_link")&&e.querySelector(".x-read-more_link").focus({}))},blockProcessed:function(t,r){r?e.hasAttribute("data-x-fade")&&e.classList.add("x-read-more_fade"):(n.classList.add("x-read-more_not-collapsable"),e.classList.remove("x-read-more_fade"))}}),n.classList.contains("x-read-more_expand")&&e.querySelector(".x-read-more_link-text")&&(e.querySelector(".x-read-more_link-text").innerHTML=closeText,e.querySelector(".x-read-more_link").setAttribute("aria-label",lessAria),e.querySelector(".x-read-more_link").setAttribute("aria-expanded","true")),window.xReadMore&&window.xReadMore.Instances&&(window.xReadMore.Instances[e.dataset.xId]=s)}),window.dispatchEvent(new Event("resize"))};function t(t){void 0===t.detail.queryId?void 0!==t.detail.popupElement&&e(t.detail.popupElement):setTimeout(()=>{let r=document.querySelector(".brxe-"+t.detail.queryId);if(r&&r.querySelector(".brxe-xreadmoreless"))e(document.querySelector(".brxe-"+t.detail.queryId).parentElement,!0);else{let o=document.createTreeWalker(document.body,NodeFilter.SHOW_COMMENT,null,!1);for(;o.nextNode();){let n=o.currentNode;if(n.nodeValue.includes("brx-loop-start-"+t.detail.queryId)){e(n.parentNode,!0);break}}}},0)}e(document),document.addEventListener("bricks/ajax/load_page/completed",t),document.addEventListener("bricks/ajax/pagination/completed",t),document.addEventListener("bricks/ajax/popup/loaded",t),document.addEventListener("bricks/ajax/end",t),window.doExtrasReadmore=e,"undefined"!=typeof bricksextras&&(bricksextras.readmore={toggle(e){let t=e?.target||!1;t&&xReadMore.Instances[t.getAttribute("data-x-id")]&&t.querySelector(".x-read-more_link")&&t.querySelector(".x-read-more_link").click()},expand(e){let t=e?.target||!1;t&&xReadMore.Instances[t.getAttribute("data-x-id")]&&t.querySelector(".x-read-more_link[aria-expanded=false]")&&t.querySelector(".x-read-more_link[aria-expanded=false]").click()},collapse(e){let t=e?.target||!1;t&&xReadMore.Instances[t.getAttribute("data-x-id")]&&t.querySelector(".x-read-more_link[aria-expanded=true]")&&t.querySelector(".x-read-more_link[aria-expanded=true]").click()}})}!function e(t,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define("Readmore",[],r):"object"==typeof exports?exports.Readmore=r():t.Readmore=r()}(window,function(){return function(e){var t={};function r(o){if(t[o])return t[o].exports;var n=t[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=e,r.c=t,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t||4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(o,n,(function(t){return e[t]}).bind(null,n));return o},r.n=function(e){var t=e&&e.__esModule?function t(){return e.default}:function t(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}({"./node_modules/@babel/runtime/helpers/classCallCheck.js":function(e,t){e.exports=function e(t,r){if(!(t instanceof r))throw TypeError("Cannot call a class as a function")}},"./node_modules/@babel/runtime/helpers/createClass.js":function(e,t){function r(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}e.exports=function e(t,o,n){return o&&r(t.prototype,o),n&&r(t,n),t}},"./node_modules/@babel/runtime/helpers/typeof.js":function(e,t){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function o(t){return"function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?e.exports=o=function e(t){return r(t)}:e.exports=o=function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":r(t)},o(t)}e.exports=o},"./src/readmore.js":function(e,t,r){"use strict";r.r(t);var o=r(/*! @babel/runtime/helpers/classCallCheck */ "./node_modules/@babel/runtime/helpers/classCallCheck.js"),n=r.n(o),a=r(/*! @babel/runtime/helpers/createClass */ "./node_modules/@babel/runtime/helpers/createClass.js"),i=r.n(a),l=r(/*! @babel/runtime/helpers/typeof */ "./node_modules/@babel/runtime/helpers/typeof.js"),s=r.n(l),d=0,c=[];function u(e,t,r){for(var o=0;o<e.length;o+=1)t.call(r,e[o],o)}function p(){return d+=1,"rmjs-".concat(d)}function f(e){e.style.height="auto";var t=parseInt(e.getBoundingClientRect().height,10),r=parseInt(window.getComputedStyle(e).maxHeight,10),o=parseInt(e.readmore.defaultHeight,10);e.readmore.expandedHeight=t,e.readmore.maxHeight=r,e.readmore.collapsedHeight=r||e.readmore.collapsedHeight||o,e.style.maxHeight="none"}function m(e,t){if(!c[e]){var r,o,n,a="";t.embedCSS&&""!==t.blockCSS&&(a+="".concat(e," + [data-readmore-toggle], ").concat(e,"[data-readmore] {\n        ").concat(t.blockCSS,"\n      }")),a+="".concat(e,"[data-readmore] {\n      transition: height ").concat(t.speed,"ms;\n      overflow: hidden;\n    }"),r=document,o=a,(n=r.createElement("style")).type="text/css",n.styleSheet?n.styleSheet.cssText=o:n.appendChild(r.createTextNode(o)),r.getElementsByTagName("head")[0].appendChild(n),c[e]=!0}}function h(e,t,r){var o,n,a=e;"function"==typeof e&&(a=e(t));var i=(o=a,(n=document.createElement("div")).innerHTML=o,n.firstChild);return i.setAttribute("data-readmore-toggle",t.id),i.setAttribute("aria-controls",t.id),i.addEventListener("click",(function e(r){this.toggle(t,r)}).bind(r)),i}!function e(t){t.forEach(function(e){!Object.prototype.hasOwnProperty.call(e,"remove")&&Object.defineProperty(e,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function e(){null!==this.parentNode&&this.parentNode.removeChild(this)}})})}([Element.prototype,CharacterData.prototype,DocumentType.prototype]);var g,x,y,b=(g=function(){u(document.querySelectorAll("[data-readmore]"),function(e){var t=e.classList.contains("x-read-more_expand");f(e),e.style.height="".concat(t?e.readmore.expandedHeight:e.readmore.collapsedHeight,"px")})},function e(){for(var t=this,r=arguments.length,o=Array(r),n=0;n<r;n++)o[n]=arguments[n];var a=x&&!y,i=function e(){y=null,x||g.apply(t,o)};clearTimeout(y),y=setTimeout(i,100),a&&g.apply(this,o)}),v={speed:100,collapsedHeight:200,heightMargin:16,moreLink:'<a href="#">Read More</a>',lessLink:'<a href="#">Close</a>',embedCSS:!0,blockCSS:"display: block; width: 100%;",startOpen:!1,sourceOrder:"after",blockProcessed:function e(){},beforeToggle:function e(){},afterToggle:function e(){}},S=function(){function e(){var t,r=this;if(n()(this,e),"undefined"!=typeof window&&"undefined"!=typeof document&&document.querySelectorAll&&window.addEventListener){for(var o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];var l=a[0],d=a[1];(t="string"==typeof l?document.querySelectorAll(l):l.nodeName?[l]:l).length&&(this.options=function e(){for(var t=arguments.length,r=Array(t),o=0;o<t;o++)r[o]=arguments[o];var n={}.hasOwnProperty,a=r[0],i=r[1];if(r.length>2){var l=[];for(Object.keys(r).forEach(function(e){l.push(r[e])});l.length>2;){var d=l.shift(),c=l.shift();l.unshift(e(d,c))}a=l.shift(),i=l.shift()}return i&&Object.keys(i).forEach(function(t){n.call(i,t)&&("object"===s()(i[t])?(a[t]=a[t]||{},a[t]=e(a[t],i[t])):a[t]=i[t])}),a}({},v,d),"string"==typeof l?m(l,this.options):(this.instanceSelector=".".concat(p()),m(this.instanceSelector,this.options)),window.addEventListener("load",b),window.addEventListener("resize",b),this.elements=[],u(t,function(e){r.instanceSelector&&e.classList.add(r.instanceSelector.substr(1));var t=r.options.startOpen;e.readmore={defaultHeight:r.options.collapsedHeight,heightMargin:r.options.heightMargin},f(e);var o=e.readmore.heightMargin;if(e.getBoundingClientRect().height<=e.readmore.collapsedHeight+o){"function"==typeof r.options.blockProcessed&&r.options.blockProcessed(e,!1);return}e.setAttribute("data-readmore",""),e.id=e.id||p();var n=h(t?r.options.lessLink:r.options.moreLink,e,r);e.parentNode.insertBefore(n,"before"===r.options.sourceOrder?e:e.nextSibling),e.style.height="".concat(t?e.readmore.expandedHeight:e.readmore.collapsedHeight,"px"),"function"==typeof r.options.blockProcessed&&r.options.blockProcessed(e,!0),r.elements.push(e)}))}}return i()(e,[{key:"toggle",value:function e(){var t=this,r=arguments.length<=0?void 0:arguments[0],o=function e(r){var o=document.querySelector('[aria-controls="'.concat(r.id,'"]')),n=parseInt(r.getBoundingClientRect().height)<=parseInt(r.readmore.collapsedHeight),a=n?r.readmore.expandedHeight:r.readmore.collapsedHeight;if("function"!=typeof t.options.beforeToggle||!1!==t.options.beforeToggle(o,r,!n)){r.style.height="".concat(a,"px");var i=function e(a){"function"==typeof t.options.afterToggle&&t.options.afterToggle(o,r,n),a.stopPropagation(),r.removeEventListener("transitionend",e,!1)};r.addEventListener("transitionend",i,!1),t.options.speed<1&&i.call(t,{target:r});var l=n?t.options.lessLink:t.options.moreLink;l?o&&o.parentNode&&o.parentNode.replaceChild(h(l,r,t),o):o.remove()}};if("string"==typeof r&&(r=document.querySelectorAll(r)),!r)throw Error("Element MUST be either an HTML node or querySelector string");var n=arguments.length<=1?void 0:arguments[1];n&&(n.preventDefault(),n.stopPropagation()),"object"!==s()(r)||r.nodeName?o(r):u(r,o)}},{key:"destroy",value:function e(t){var r,o=this;u(r=t?"string"==typeof t?document.querySelectorAll(t):t.nodeName?[t]:t:this.elements,function(e){if(-1!==o.elements.indexOf(e)){o.elements=o.elements.filter(function(t){return t!==e}),o.instanceSelector&&e.classList.remove(o.instanceSelector.substr(1)),delete e.readmore,e.style.height="initial",e.style.maxHeight="initial",e.removeAttribute("data-readmore");var t=document.querySelector('[aria-controls="'.concat(e.id,'"]'));t&&t.remove(),-1!==e.id.indexOf("rmjs-")&&e.removeAttribute("id")}}),delete this}}]),e}();S.VERSION="3.0.0-beta-1",t.default=S},0:function(e,t,r){e.exports=r(/*! ./src/readmore.js */ "./src/readmore.js")}}).default}),document.addEventListener("DOMContentLoaded",function(e){setTimeout(()=>{bricksIsFrontend&&xReadMoreLess()},100)});