function xFavorite(){var e;let t=document.cookie.split("; ").find(e=>e.startsWith("x_favorite_time="))?.split("=")[1],a=Math.floor(Date.now()/1e3),r=t||0,i=document.cookie.split("; ").find(e=>e.startsWith("x_logged_in_user=")),o=null!=i&&document.body.classList.contains("logged-in");if(a-r>300&&!o){let d=xFavoriteObject.sec,s=xFavoriteObject.ajaxurl;fetch(s,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},body:new URLSearchParams({action:"x_validate_favorite_ids",sec:d}).toString(),credentials:"same-origin"}).then(e=>e.json()).then(e=>{e.success}).catch(e=>{console.error("Error updating cookie:",e)})}function l(e){e.style.height=e.scrollHeight+"px",e.offsetHeight,e.classList.add("x-favorite_fade-out"),e.addEventListener("transitionend",function(){e.remove()},{once:!0})}function n(e,t,a,r,i,o=!1){if(e.data[t]){let d=e.data[t];d.includes(a)?r.dispatchEvent(new CustomEvent("x_favorite:added",{detail:{data:e.data,postType:t,postId:a}})):d.length>0?r.dispatchEvent(new Event("x_favorite:removed",{detail:{postType:t,postId:a}})):"clear"===i?r.dispatchEvent(new CustomEvent("x_favorite:cleared",{detail:{postType:t}})):r.dispatchEvent(new Event("x_favorite:removed",{detail:{postType:t,postId:a}}))}else r.dispatchEvent(new CustomEvent("x_favorite:cleared",{detail:{postType:t}}));(e.message||o)&&r.dispatchEvent(new CustomEvent("x_favorite:maximum-reached",{detail:{postType:t}})),window.dispatchEvent(new CustomEvent("x_favorite:updated",{detail:{data:e.data,postType:t}}))}function c(e){let t=`; ${document.cookie}`,a=t.split(`; ${e}=`);return 2===a.length?decodeURIComponent(a.pop().split(";").shift()):null}function x(e,t,a){let r=new Date;r.setTime(r.getTime()+864e5*a);let i="expires="+r.toUTCString();document.cookie=`${e}=${encodeURIComponent(t)}; ${i}; secure; SameSite=Strict; path=/`}let f=function(e,a=!1){let r=xFavoriteObject.sec,i=xFavoriteObject.ajaxurl,o="x_favorite_ids",d=document.cookie.split("; ").find(e=>e.startsWith("x_logged_in_user=")),s=!!d&&document.body.classList.contains("logged-in"),f={};document.cookie.split("; ").forEach(e=>{let[t,a]=e.split("=");if(t.startsWith("x_favorite_ids__")){let r=t.replace("x_favorite_ids__","");f[r]=JSON.parse(decodeURIComponent(a)||"[]")}});let v=f;e.querySelectorAll(".brxe-xfavorite").forEach(a=>{let d=a.getAttribute("data-x-favorite"),f=d?JSON.parse(d):{},u=a.getAttribute("data-x-type"),p=a.getAttribute("data-x-list"),h=a.hasAttribute("data-x-list-max")?parseInt(a.getAttribute("data-x-list-max")):0,y=parseInt(a.getAttribute("data-post-id"));a.hasAttribute("data-x-item-id")&&(y=parseInt(a.getAttribute("data-x-item-id")));let m=a.querySelector("button");if(v){var g,b,T,S,L,E,A;g=v,b=a,T=u,S=m,L=p,E=y,A=f,g&&("add_remove"===T&&S?g[L]&&g[L].includes(E)?(S.classList.add("x-favorite_added"),S.setAttribute("aria-pressed","true"),A.addedText&&b.querySelector(".x-favorite_text-inner")&&(b.querySelector(".x-favorite_text-inner").innerHTML=A.addedText)):(S.classList.remove("x-favorite_added"),S.setAttribute("aria-pressed","false"),A.addText&&b.querySelector(".x-favorite_text-inner")&&(b.querySelector(".x-favorite_text-inner").innerHTML=A.addText)):"count"===T&&b.querySelector(".x-favorite_count-inner")&&(g[L]&&g[L].length>0?(b.querySelector(".x-favorite_count-inner").innerHTML=g[L].length.toString(),b.querySelector(".x-favorite_count").classList.remove("x-favorite_count-zero")):b.querySelector(".x-favorite_count-inner").innerHTML="0"),document.querySelectorAll("[data-x-favorite-count]").forEach(e=>{let t=e.getAttribute("data-x-favorite-count").split(":");if(t.includes(L)){let a=0;t.forEach(e=>{g[e]&&g[e].length>0&&(a+=g[e].length)}),e.innerHTML=a.toString()}}))}a.addEventListener("click",e=>{a.querySelector(".x-favorite").hasAttribute("disabled")&&e.preventDefault()}),m&&!m.hasAttribute("data-x-click")&&(a.addEventListener("click",e=>{e.preventDefault(),m.classList.add("x-favorite_busy");let d=!1,l=!1;if(s){let f={action:"x_update_favorite",post_id:y,post_type:p,listMaximum:h,cookie:o+"__"+p,sec:r,type:u};fetch(i,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},body:new URLSearchParams(f).toString(),credentials:"same-origin"}).then(e=>e.json()).then(e=>{e.success&&(n(e.data,p,y,a,u),"remove"!==u&&m.classList.remove("x-favorite_busy"))}).catch(e=>{console.error("Error updating cookie:",e)})}else{let v={data:{}},g="x_favorite_ids__";if(document.cookie.split("; ").forEach(e=>{let[t,a]=e.split("=");if(t.startsWith(g)){let r=JSON.parse(decodeURIComponent(a));v.data[t.replace(g,"")]=r,"object"!=typeof r||Array.isArray(r)||Object.keys(r).forEach(e=>{v.data[e]||(v.data[e]=[]),r[e].forEach(t=>{v.data[e].includes(t)||v.data[e].push(t)})})}}),"clear"===u)v.data[p]&&(v.data[p]=[]);else{v.data[p]||(v.data[p]=[]);let b=v.data[p].indexOf(y);-1!==b?v.data[p].splice(b,1):(h>=1&&(l=!0),!l||v.data[p].length<h?(v.data[p].includes(y)||v.data[p].push(y),d=!1):d=!0)}Object.keys(v.data).forEach(e=>{v.data[e].length>0?document.cookie=`${g}${e}=${encodeURIComponent(JSON.stringify(v.data[e]))}; path=/; max-age=604800; secure; samesite=Strict;`:document.cookie=`${g}${e}=; path=/; max-age=0;`}),(t=document.cookie.split("; ").find(e=>e.startsWith("x_favorite_time="))?.split("=")[1])||x("x_favorite_time",Math.floor(Date.now()/1e3),7),c(o)||x("x_favorite_allow","true",7),setTimeout(()=>{n(v,p,y,a,u,d),"remove"!==u&&m.classList.remove("x-favorite_busy")},200)}}),m.hasAttribute("data-x-click")||m.setAttribute("data-x-click",""),a.addEventListener("x_favorite:cleared",e=>{if(f.clearedText&&a.querySelector(".x-favorite_text-inner")&&(a.querySelector(".x-favorite_text-inner").innerHTML=f.clearedText),m.setAttribute("aria-pressed","true"),"add_remove"!==u){if("clear"===u)document.querySelectorAll('[data-x-favorite-item="'+e.detail.postType+'"]').forEach(e=>{l(e)}),document.querySelectorAll('.brxe-xfavorite[data-x-list="'+e.detail.postType+'"]').forEach(e=>{e.dispatchEvent(new Event("x_favorite:removed"))}),m.classList.add("x-favorite_cleared"),m.setAttribute("aria-pressed","true");else if(null!=f.isLooping){let t=a.closest(".brxe-"+f.isLooping);t?l(t):null!=f.isLoopingComponent&&l(t=a.closest(".brxe-"+f.isLoopingComponent))}}else m.classList.remove("x-favorite_added"),m.setAttribute("aria-pressed","false"),f.addText&&a.querySelector(".x-favorite_text-inner")&&(a.querySelector(".x-favorite_text-inner").innerHTML=f.addText)}),a.addEventListener("x_favorite:added",t=>{e.querySelectorAll('.brxe-xfavorite[data-x-list="'+p+'"][data-x-type="add_remove"][data-post-id="'+y+'"]').forEach(e=>{e!==a&&e.dispatchEvent(new CustomEvent("x_favorite:also-added",{detail:{postType:p,postId:y}}))}),window.dispatchEvent(new CustomEvent("x_favorite:added",{detail:{postType:p,postId:y}})),a.dispatchEvent(new CustomEvent("x_favorite:count-reached_"+t.detail.data[p].length),{detail:{data:t.detail.data,postType:p}})}),"clear"===u&&a.addEventListener("x_favorite:not_empty",()=>{m.classList.remove("x-favorite_cleared"),f.clearText&&a.querySelector(".x-favorite_text-inner")&&(a.querySelector(".x-favorite_text-inner").innerHTML=f.clearText)}),a.addEventListener("x_favorite:removed",()=>{if(document.querySelectorAll('.brxe-xfavorite[data-x-list="'+p+'"][data-x-type="add_remove"][data-post-id="'+y+'"]').forEach(e=>{e!==a&&e.dispatchEvent(new CustomEvent("x_favorite:also-removed",{detail:{postType:p,postId:y}}))}),"remove"===u){if(null!=f.isLooping){let e=a.closest(".brxe-"+f.isLooping);e?l(e):null!=f.isLoopingComponent&&l(e=a.closest(".brxe-"+f.isLoopingComponent))}}else m.classList.remove("x-favorite_added");window.dispatchEvent(new CustomEvent("x_favorite:removed",{detail:{postType:p,postId:y}}))}),a.addEventListener("x_favorite:maximum-reached",()=>{m.setAttribute("aria-pressed","false"),f.maxReachedText&&a.querySelector(".x-favorite_text-inner")&&(a.querySelector(".x-favorite_text-inner").innerHTML=f.maxReachedText)}))}),window.addEventListener("x_favorite:updated",e=>{let t=e.detail.postType,a=e.detail.data;a[t]||(a[t]=[]),0===parseInt(a[t].length)&&document.querySelectorAll('.brxe-xfavorite[data-x-type=clear][data-x-list="'+e.detail.postType+'"]').forEach(e=>{e.dispatchEvent(new CustomEvent("x_favorite:cleared",{detail:{postType:t}}))}),document.querySelectorAll(".brxe-xfavorite[data-x-type=count]").forEach(r=>{r.getAttribute("data-x-list")===e.detail.postType&&r.querySelector(".x-favorite_count-inner")&&(r.querySelector(".x-favorite_count-inner").innerHTML=parseInt(a[t].length),0===parseInt(a[t].length)?r.querySelector(".x-favorite_count").classList.add("x-favorite_count-zero"):r.querySelector(".x-favorite_count").classList.remove("x-favorite_count-zero"))}),document.querySelectorAll("[data-x-favorite-count]").forEach(e=>{let r=e.getAttribute("data-x-favorite-count").split(":");if(r.includes(t)){let i=0;r.forEach(e=>{a[e]&&a[e].length>0&&(i+=parseInt(a[e].length))}),e.innerHTML=i.toString()}})}),window.addEventListener("x_favorite:added",e=>{let t=e.detail.postType,a=e.detail.postId,r="";document.querySelectorAll('.brxe-xfavorite[data-x-list="'+t+'"][data-x-type="add_remove"]').forEach(e=>{if((r=e.hasAttribute("data-x-item-id")?parseInt(e.getAttribute("data-x-item-id")):parseInt(e.getAttribute("data-post-id")))===a){let t=e.getAttribute("data-x-favorite"),i=t?JSON.parse(t):{},o=e.querySelector("button");o.setAttribute("aria-pressed","true"),o.classList.add("x-favorite_added"),i.addedText&&o.querySelector(".x-favorite_text-inner")&&(o.querySelector(".x-favorite_text-inner").innerHTML=i.addedText)}})}),window.addEventListener("x_favorite:removed",e=>{let t=e.detail.postType,a=e.detail.postId,r="";document.querySelectorAll('.brxe-xfavorite[data-x-list="'+t+'"][data-x-type="add_remove"]').forEach(e=>{if((r=e.hasAttribute("data-x-item-id")?parseInt(e.getAttribute("data-x-item-id")):parseInt(e.getAttribute("data-post-id")))===a){let t=e.getAttribute("data-x-favorite"),i=t?JSON.parse(t):{},o=e.querySelector("button");o.setAttribute("aria-pressed","false"),o.classList.remove("x-favorite_added"),i.addText&&o.querySelector(".x-favorite_text-inner")&&(o.querySelector(".x-favorite_text-inner").innerHTML=i.addText)}})})};f(document),e=document,c("x_favorite_allow")&&e.querySelectorAll(".brxe-xfavorite").forEach(e=>{e.querySelector(".x-favorite")&&e.querySelector(".x-favorite").removeAttribute("disabled")}),xExtrasRegisterAJAXHandler("doExtrasFavorite",!0),window.doExtrasFavorite=f,window.xDisAllowFavorite=function e(){if(document.body.classList.contains("logged-in"))return;document.cookie="x_favorite_allow=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;";let t=xFavoriteObject.sec,a=xFavoriteObject.ajaxurl;fetch(a,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},body:new URLSearchParams({action:"x_remove_favorite",sec:t}).toString(),credentials:"same-origin"}).then(e=>e.json()).then(e=>{e.success&&(window.dispatchEvent(new CustomEvent("x_favorite:disallowed")),document.querySelectorAll(".x-favorite").forEach(e=>{e.setAttribute("disabled",""),e.classList.remove("x-favorite_added")}))}).catch(e=>{console.error("Error updating cookie:",e)}),document.querySelectorAll("[data-x-favorite-count]").forEach(e=>{e.innerHTML="0"}),document.querySelectorAll(".x-favorite_count").forEach(e=>{e.classList.add("x-favorite_count-zero"),e.querySelector(".x-favorite_count-inner")&&(e.querySelector(".x-favorite_count-inner").innerHTML="0")})},window.xAllowFavorite=function e(t=7){if(document.body.classList.contains("logged-in"))return;let a="x_favorite_allow";c(a)||x(a,"true",t),document.querySelectorAll(".brxe-xfavorite").forEach(e=>{e.querySelector(".x-favorite")&&e.querySelector(".x-favorite").removeAttribute("disabled")}),window.dispatchEvent(new CustomEvent("x_favorite:allowed"))}}document.addEventListener("DOMContentLoaded",function(e){bricksIsFrontend&&xFavorite()});