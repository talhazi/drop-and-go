function xDynamicChart(){function t(t){let o;return t?o=void 0!==t.color?t.color.raw&&t.color.raw.startsWith("var")?getComputedStyle(document.documentElement).getPropertyValue(t.color.raw.slice(4,-1)).trim():t.color.hex:t.startsWith("var")?getComputedStyle(document.documentElement).getPropertyValue(t.slice(4,-1)).trim():t:""}function o(t,o){return t.rgb?t.rgb:t.hex?t.hex:t.raw?t.raw.startsWith("var")?getComputedStyle(document.documentElement).getPropertyValue(t.raw.slice(4,-1)).trim():t.raw:o}let e=function(e){e.querySelectorAll(".brxe-xdynamicchart").forEach(e=>{let r=e.querySelector("table");if(r){let a=r&&r.getAttribute("data-x-chart")?JSON.parse(r.getAttribute("data-x-chart")):{},l=[],i=[],s=[],n=[],d=[],c=[],g=!1,u,p=[],h=[],y=r.querySelectorAll("th");if(y.forEach(function(t){l.push(t.innerHTML)}),a.loopDataPoints){if(e.querySelectorAll("td[data-point-color]").length>0){let b=e.querySelectorAll("td[data-point-color]");b.length>0&&b.forEach(o=>{void 0!==o.getAttribute("data-point-color")&&(d.push(t(o.getAttribute("data-point-color"))),c.push(o.getAttribute("data-point-color")))})}else{let x=e.querySelectorAll("li[data-x-chart-style]");x.length>0&&x.forEach((o,e)=>{void 0!==JSON.parse(o.getAttribute("data-x-chart-style")).color&&(d.push(t(JSON.parse(o.getAttribute("data-x-chart-style")))),c.push(JSON.parse(o.getAttribute("data-x-chart-style"))))})}}else if(e.querySelectorAll("td.legend[data-set-color]").length>0){let C=e.querySelectorAll("td.legend");C.length>0&&(g=!0,C.forEach(o=>{void 0!==o.getAttribute("data-set-color")&&(s.push(t(o.getAttribute("data-set-color"))),n.push(o.getAttribute("data-set-color")))}))}else{let f=e.querySelectorAll("li[data-x-chart-style]");f.length>0&&(g=!0,f.forEach((o,e)=>{void 0!==JSON.parse(o.getAttribute("data-x-chart-style")).color&&(s.push(t(JSON.parse(o.getAttribute("data-x-chart-style")))),n.push(JSON.parse(o.getAttribute("data-x-chart-style"))))}))}let A=r.querySelectorAll("tbody tr");if(A.length&&A.forEach((e,r)=>{let l=e.querySelectorAll("td:not(.legend)"),n=e.querySelector("td.legend");var c=[];l.forEach(o=>{c.push(o.innerHTML),g||null==o.getAttribute("data-x-chart-style")||(p.push(t(JSON.parse(o.getAttribute("data-x-chart-style")))),h.push(JSON.parse(o.getAttribute("data-x-chart-style"))))}),i.push({label:n?n.innerHTML:"",data:c,backgroundColor:g?s[r]:a.loopDataPoints?d:p,borderColor:g?s[r]:"line"===a.chartType?o(a.lineColor,"#44889c"):o(a.barBorderColor,"#44889c")})}),e.querySelector("table")&&!document.querySelector("body > .brx-body.iframe")&&e.querySelector("table").remove(),e.querySelector(".x-dynamic-chart_list")&&e.querySelector(".x-dynamic-chart_list").remove(),e.querySelector("canvas")&&e.querySelector("canvas").remove(),!A.length&&!document.querySelector("body > .brx-body.iframe"))return;function m(t){if(!t||Array.isArray(t))return{};let o={family:t["font-family"]?String(t["font-family"]):void 0,weight:t["font-weight"]?String(t["font-weight"]):void 0,style:t["font-style"]||void 0,lineHeight:t["line-height"]?parseFloat(t["line-height"]):void 0,size:t["font-size"]?parseInt(t["font-size"]):void 0};return Object.keys(o).forEach(t=>void 0===o[t]&&delete o[t]),o}let k={display:"false"!=a.xAxisDisplay,title:{display:!0,text:a.xAxisTitle?a.xAxisTitle:"",color:o(a.xAxisTitleColor,"#222"),font:m(a.xAxisFont||defaultTypography)},ticks:{color:o(a.xAxisTicksColor,"#222"),font:m(a.xAxisTicksFont||defaultTypography)},grid:{drawBorder:!0,borderColor:o(a.xBorderColor,"#222"),lineWidth:1,color:o(a.xGridColor,"#eee")},drawTicks:!1},$={display:"false"!=a.yAxisDisplay,title:{display:!0,text:a.yAxisTitle?a.yAxisTitle:"",color:o(a.yAxisTitleColor,"#222"),font:m(a.yAxisFont||defaultTypography)},ticks:{color:o(a.yAxisTicksColor,"#222"),font:m(a.yAxisTicksFont||defaultTypography)},grid:{drawBorder:!0,borderColor:o(a.yBorderColor,"#222"),lineWidth:1,color:o(a.yGridColor,"#eee")}},v={type:a.yAxisType,beginAtZero:"true"==a.beginAtZero,suggestedMin:a.suggestedMin,suggestedMax:a.suggestedMax};u="after"===a.xAxisUnitPosition?t=>`${t}`+a.xAxisUnits:t=>a.xAxisUnits+`${t}`,"vertical"===a.chartDirection?($=Object.assign({},$,v)).ticks.callback=u:(k=Object.assign({},k,v)).ticks.callback=u,"true"===xChart.RTL&&(k.reverse=!0),"true"===xChart.RTL&&($.position="right");var B=document.createElement("canvas");B.setAttribute("aria-label",a.ariaLabel),B.setAttribute("role","img"),e.appendChild(B);var w=B.getContext("2d");let L="doughnut"===a.chartType?1:2;if(a.aspectRatio){if("string"==typeof a.aspectRatio&&a.aspectRatio.includes("/")){let T=a.aspectRatio.split("/");L=parseFloat(T[0])/parseFloat(T[1])}else L=parseFloat(a.aspectRatio)}let W={type:a.chartType,data:{labels:l,datasets:i},resizeDelay:250,options:{aspectRatio:L,font:m(a.chartTypography),indexAxis:"vertical"!==a.chartDirection?"y":"x",events:"click"!=a.events?["mousemove","mouseout","click","touchstart","touchmove"]:["click","mouseout"],elements:{line:{borderColor:o(a.lineColor,"#44889c"),borderWidth:a.lineWidth?a.lineWidth:2,tension:a.tension},point:{radius:a.linePointRadius,pointBorderWidth:a.linePointBorderWidth?a.linePointBorderWidth:1,borderWidth:0},bar:{borderColor:o(a.barBorderColor,"#44889c"),borderRadius:a.barBorderRadius,borderWidth:a.barBorderWidth?a.barBorderWidth:0},arc:{borderWidth:a.pieBorderWidth?a.pieBorderWidth:0}},spanGaps:!0,scales:{x:k,y:$},interaction:{mode:"index",intersect:!1},animations:{tension:{duration:0},radius:{duration:0},borderWidth:{duration:0},x:{duration:0},y:{duration:0}},plugins:{legend:{display:"false"!=a.legendDisplay,position:a.legendPosition?a.legendPosition:"top",align:a.legendAlign?a.legendAlign:"center",labels:{boxWidth:a.legendBoxWidth?a.legendBoxWidth:15,boxHeight:a.legendBoxHeight?a.legendBoxHeight:12,padding:a.legendPadding?a.legendPadding:10,color:o(a.legendColor,"#666"),font:function(t){let o=m(a.chartTypography),e=m(a.legendFont);return{...o,...e}}}},tooltip:{enabled:"false"!=a.tooltipDisplay,padding:20,backgroundColor:o(a.tooltipBackground,"#fff"),titleColor:o(a.tooltipColor,"#111"),bodyColor:o(a.tooltipColor,"#222"),borderColor:o(a.tooltipBorderColor,"#222"),borderWidth:a.tooltipBorderWidth?a.tooltipBorderWidth:1,caretSize:a.tooltipCaretSize?a.tooltipCaretSize:5,caretPadding:10,cornerRadius:10,displayColors:!1,titleFont:{...m(a.chartTypography),...m(a.tooltipTitleFont)},bodyFont:{...m(a.chartTypography),...m(a.tooltipBodyFont)},callbacks:{label:function(t){let o=t.dataset.label||"";o&&(o+=": ");let e;return e="doughnut"===a.chartType?t.parsed:"vertical"===a.chartDirection?t.parsed.y:t.parsed.x,null!==t.parsed&&("after"==a.xAxisUnitPosition?o+=e+a.xAxisUnits:o+=a.xAxisUnits+e),o}}}},rotation:a.rotation,circumference:a.circumference,cutout:a.pieCutOut?a.pieCutOut.toString()+"%":0,layout:{padding:{top:a.spacingTop?a.spacingTop:0,right:a.spacingRight?a.spacingRight:0,bottom:a.spacingBottom?a.spacingBottom:0,left:a.spacingLeft?a.spacingLeft:0}}}};a.dataLabelsDisplay&&(W.plugins=[ChartDataLabels],W.options.plugins.datalabels={display:!0,backgroundColor:function(t){return o(a.dataLabelsBackgroundColor,t.dataset.backgroundColor)},borderRadius:4,color:o(a.dataLabelsColor,"#ffffff"),anchor:a.dataLabelsAnchor,align:a.dataLabelsAlign,offset:a.dataLabelsOffset,padding:a.dataLabelsPadding?a.dataLabelsPadding:"1em",borderColor:function(t){return o(a.dataLabelsBorderColor,t.dataset.backgroundColor)},borderWidth:a.dataLabelsBorderWidth,borderRadius:a.dataLabelsBorderRadius,font:{family:a.dataLabelsFontFamily["font-family"]?a.dataLabelsFontFamily["font-family"]:"inherit",style:a.dataLabelsFontFamily["font-style"]?a.dataLabelsFontFamily["font-style"]:"inherit",lineHeight:a.dataLabelsFontFamily["line-height"]?a.dataLabelsFontFamily["line-height"]:"inherit",size:a.dataLabelsFontSize?a.dataLabelsFontSize:"12px",weight:a.dataLabelsFontWeight?a.dataLabelsFontWeight:"normal"},textAlign:"center",rotation:a.dataLabelsRotation,formatter:(t,o)=>"after"===a.xAxisUnitPosition?t+a.xAxisUnits:a.xAxisUnits+t});var R=new Chart(w,W);window.xChart&&window.xChart.Config&&(window.xChart.Instances[e.dataset.xId]=R,window.xChart.Config[e.dataset.xId]={config:a,dataPointColorsRaw:c,backgroundColorArrayRaw:h,dataSetColorsRaw:n,queryLoop:g})}else if(window.xChart&&window.xChart.Config){let _=window.xChart.Instances[e.dataset.xId],S=window.xChart.Config[e.dataset.xId],F=Object.entries({"scales.x.ticks.color":"xAxisTicksColor","scales.y.ticks.color":"yAxisTicksColor","scales.x.title.color":"xAxisTitleColor","scales.y.title.color":"yAxisTitleColor","scales.x.grid.borderColor":"xBorderColor","scales.y.grid.borderColor":"yBorderColor","scales.x.grid.color":"xGridColor","scales.y.grid.color":"yGridColor","datasets.backgroundColor":"backgroundColorArrayRaw","datasets.borderColor":"borderColorArrayRaw","plugins.tooltip.backgroundColor":"tooltipBackground","plugins.tooltip.titleColor":"tooltipColor","plugins.tooltip.bodyColor":"tooltipColor","plugins.tooltip.borderColor":"tooltipBorderColor","plugins.datalabels.color":"dataLabelsColor","plugins.datalabels.backgroundColor":"dataLabelsBackgroundColor","plugins.datalabels.borderColor":"dataLabelsBorderColor","plugins.legend.labels.color":"legendColor"}).filter(([t,o])=>{let e=S.config?.[o];return e?.raw?.startsWith("var")}).map(([t])=>t);!function t(o,e,r,a){function l(t){let o=getComputedStyle(document.documentElement).getPropertyValue(t).trim();return o}if(r.dataPointColorsRaw&&Array.isArray(r.dataPointColorsRaw)){let i=r.dataPointColorsRaw.map(t=>{if(t.color?.raw?.startsWith("var")){let o=t.color.raw.replace(/^var\(([^)]+)\)$/,"$1");return l(o)||"#222"}return t.color?.hex?t.color.hex:"string"==typeof t?t:"#222"});o.data.datasets&&o.data.datasets.length>0&&o.data.datasets.forEach((t,o)=>{r.config.loopDataPoints&&(t.backgroundColor=i,t.borderColor=i,"line"===r.config.chartType&&(t.pointBackgroundColor=i,t.pointBorderColor=i))})}if(r.dataSetColorsRaw&&Array.isArray(r.dataSetColorsRaw)){let s=r.dataSetColorsRaw.map(t=>{if(t.color?.raw?.startsWith("var")){let o=t.color.raw.replace(/^var\(([^)]+)\)$/,"$1"),e=getComputedStyle(document.documentElement).getPropertyValue(o).trim();return e}return t.color?.hex?t.color.hex:"string"==typeof t?t:"#222"});o.data.datasets&&o.data.datasets.length>0&&a&&o.data.datasets.forEach((t,o)=>{let e=s[o%s.length];t.backgroundColor=e,t.borderColor=e})}if(r.backgroundColorArrayRaw&&Array.isArray(r.backgroundColorArrayRaw)){let n=r.backgroundColorArrayRaw.map(t=>{if(t.color?.raw?.startsWith("var")){let o=t.color.raw.replace(/^var\(([^)]+)\)$/,"$1");return l(o)||"#222"}return t.color?.hex?t.color.hex:"string"==typeof t?t:"#222"});o.data.datasets&&o.data.datasets.length>0&&o.data.datasets.forEach((t,o)=>{a||r.config.loopDataPoints||(t.backgroundColor=n)})}function d(t,e){let a={"scales.x.ticks.color":"xAxisTicksColor","scales.y.ticks.color":"yAxisTicksColor","scales.x.title.color":"xAxisTitleColor","scales.y.title.color":"yAxisTitleColor","scales.x.grid.borderColor":"xBorderColor","scales.y.grid.borderColor":"yBorderColor","scales.x.grid.color":"xGridColor","scales.y.grid.color":"yGridColor","datasets.backgroundColor":"backgroundColorArrayRaw","plugins.tooltip.backgroundColor":"tooltipBackground","plugins.tooltip.titleColor":"tooltipColor","plugins.tooltip.bodyColor":"tooltipColor","plugins.tooltip.borderColor":"tooltipBorderColor","plugins.datalabels.color":"dataLabelsColor","plugins.datalabels.backgroundColor":"dataLabelsBackgroundColor","plugins.datalabels.borderColor":"dataLabelsBorderColor","plugins.legend.labels.color":"legendColor"}[e];if("backgroundColorArrayRaw"===a&&r.config[a]){let i=r.config[a].map(t=>{if(t.color?.raw?.startsWith("var")){let o=t.color.raw.replace(/^var\(([^)]+)\)$/,"$1");return l(o)||"#222"}return t.color?.hex||"#222"});o.data.datasets&&o.data.datasets.length>0&&o.data.datasets.forEach((t,o)=>{let e=i[o%i.length];t.backgroundColor=e});return}if(!a||!r?.config?.[a]?.raw)return;let s=r.config[a].raw;if(!s.startsWith("var"))return;let n=s.replace(/^var\(([^)]+)\)$/,"$1"),d=l(n)||"#222",c=e.split("."),g=t;try{for(let u of c.slice(0,-1)){if(!g[u])return;g=g[u]}let p=c[c.length-1];g[p]=d}catch(h){}}e.forEach(t=>{d(o.config.options,t),d(o.data,t)}),o.update()}(_,F,S,S.queryLoop)}})};setTimeout(()=>{e(document)},30),xExtrasRegisterAJAXHandler("doExtrasChart"),window.doExtrasChart=e}document.addEventListener("DOMContentLoaded",function(t){bricksIsFrontend&&xDynamicChart()});