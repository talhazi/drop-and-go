!(function (e, t) { typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = t() : typeof define === 'function' && define.amd ? define(t) : (e = typeof globalThis !== 'undefined' ? globalThis : e || self).MicroModal = t() }(this, function () { 'use strict'; function e (e, t) { for (let o = 0; o < t.length; o++) { const n = t[o]; n.enumerable = n.enumerable || !1, n.configurable = !0, 'value' in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } function t (e) { return (function (e) { if (Array.isArray(e)) return o(e) }(e)) || (function (e) { if (typeof Symbol !== 'undefined' && Symbol.iterator in Object(e)) return Array.from(e) }(e)) || (function (e, t) { if (!e) return; if (typeof e === 'string') return o(e, t); let n = Object.prototype.toString.call(e).slice(8, -1); n === 'Object' && e.constructor && (n = e.constructor.name); if (n === 'Map' || n === 'Set') return Array.from(e); if (n === 'Arguments' || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return o(e, t) }(e)) || (function () { throw new TypeError('Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.') }()) } function o (e, t) { (t == null || t > e.length) && (t = e.length); for (var o = 0, n = new Array(t); o < t; o++)n[o] = e[o]; return n } let n; let i; let a; let r; let s; const l = (n = ['a[href]', 'area[href]', 'input:not([disabled]):not([type="hidden"]):not([aria-hidden])', 'select:not([disabled]):not([aria-hidden])', 'textarea:not([disabled]):not([aria-hidden])', 'button:not([disabled]):not([aria-hidden])', 'iframe', 'object', 'embed', '[contenteditable]', '[tabindex]:not([tabindex^="-"])'], i = (function () { function o (e) { const n = e.targetModal; const i = e.triggers; const a = void 0 === i ? [] : i; const r = e.onShow; const s = void 0 === r ? function () { } : r; const l = e.onClose; const c = void 0 === l ? function () { } : l; const d = e.openTrigger; const u = void 0 === d ? 'data-micromodal-trigger' : d; const f = e.closeTrigger; const h = void 0 === f ? 'data-micromodal-close' : f; const v = e.openClass; const g = void 0 === v ? 'is-open' : v; const m = e.disableScroll; const b = void 0 !== m && m; const y = e.disableFocus; const p = void 0 !== y && y; const w = e.awaitCloseAnimation; const E = void 0 !== w && w; const k = e.awaitOpenAnimation; const M = void 0 !== k && k; const A = e.debugMode; const C = void 0 !== A && A; !(function (e, t) { if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function') }(this, o)), this.modal = document.getElementById(n), this.config = { debugMode: C, disableScroll: b, openTrigger: u, closeTrigger: h, openClass: g, onShow: s, onClose: c, awaitCloseAnimation: E, awaitOpenAnimation: M, disableFocus: p }, a.length > 0 && this.registerTriggers.apply(this, t(a)), this.onClick = this.onClick.bind(this), this.onKeydown = this.onKeydown.bind(this) } let i, a, r; return i = o, (a = [{ key: 'registerTriggers', value: function () { for (var e = this, t = arguments.length, o = new Array(t), n = 0; n < t; n++)o[n] = arguments[n]; o.filter(Boolean).forEach(function (t) { t.addEventListener('click', function (t) { return e.showModal(t) }) }) } }, { key: 'showModal', value: function () { const e = this; const t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : null; if (this.activeElement = document.activeElement, this.modal.setAttribute('aria-hidden', 'false'), this.modal.classList.add(this.config.openClass), this.scrollBehaviour('disable'), this.addEventListeners(), this.config.awaitOpenAnimation) { const o = function t () { e.modal.removeEventListener('animationend', t, !1), e.setFocusToFirstNode() }; this.modal.addEventListener('animationend', o, !1) } else this.setFocusToFirstNode(); this.config.onShow(this.modal, this.activeElement, t) } }, { key: 'closeModal', value: function () { const e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : null; const t = this.modal; if (this.modal.setAttribute('aria-hidden', 'true'), this.removeEventListeners(), this.scrollBehaviour('enable'), this.activeElement && this.activeElement.focus && this.activeElement.focus(), this.config.onClose(this.modal, this.activeElement, e), this.config.awaitCloseAnimation) { const o = this.config.openClass; this.modal.addEventListener('animationend', function e () { t.classList.remove(o), t.removeEventListener('animationend', e, !1) }, !1) } else t.classList.remove(this.config.openClass) } }, { key: 'closeModalById', value: function (e) { this.modal = document.getElementById(e), this.modal && this.closeModal() } }, { key: 'scrollBehaviour', value: function (e) { if (this.config.disableScroll) { const t = document.querySelector('body'); switch (e) { case 'enable': Object.assign(t.style, { overflow: '', height: '' }); break; case 'disable': Object.assign(t.style, { overflow: 'hidden', height: '100%' }) } } } }, { key: 'addEventListeners', value: function () { this.modal.addEventListener('touchstart', this.onClick), this.modal.addEventListener('click', this.onClick), document.addEventListener('keydown', this.onKeydown) } }, { key: 'removeEventListeners', value: function () { this.modal.removeEventListener('touchstart', this.onClick), this.modal.removeEventListener('click', this.onClick), document.removeEventListener('keydown', this.onKeydown) } }, { key: 'onClick', value: function (e) { (e.target.hasAttribute(this.config.closeTrigger) || e.target.parentNode.hasAttribute(this.config.closeTrigger)) && (e.preventDefault(), e.stopPropagation(), this.closeModal(e)) } }, { key: 'onKeydown', value: function (e) { e.keyCode === 9 && this.retainFocus(e) } }, { key: 'getFocusableNodes', value: function () { const e = this.modal.querySelectorAll(n); return Array.apply(void 0, t(e)) } }, { key: 'setFocusToFirstNode', value: function () { const e = this; if (!this.config.disableFocus) { const t = this.getFocusableNodes(); if (t.length !== 0) { const o = t.filter(function (t) { return !t.hasAttribute(e.config.closeTrigger) }); o.length > 0 && o[0].focus(), o.length === 0 && t[0].focus() } } } }, { key: 'retainFocus', value: function (e) { let t = this.getFocusableNodes(); if (t.length !== 0) if (t = t.filter(function (e) { return e.offsetParent !== null }), this.modal.contains(document.activeElement)) { const o = t.indexOf(document.activeElement); e.shiftKey && o === 0 && (t[t.length - 1].focus(), e.preventDefault()), !e.shiftKey && t.length > 0 && o === t.length - 1 && (t[0].focus(), e.preventDefault()) } else t[0].focus() } }]) && e(i.prototype, a), r && e(i, r), o }()), a = null, r = function (e) { if (!document.getElementById(e)) return console.warn("MicroModal: ❗Seems like you have missed %c'".concat(e, "'"), 'background-color: #f8f9fa;color: #50596c;font-weight: bold;', 'ID somewhere in your code. Refer example below to resolve it.'), console.warn('%cExample:', 'background-color: #f8f9fa;color: #50596c;font-weight: bold;', '<div class="modal" id="'.concat(e, '"></div>')), !1 }, s = function (e, t) { if ((function (e) { e.length <= 0 && (console.warn("MicroModal: ❗Please specify at least one %c'micromodal-trigger'", 'background-color: #f8f9fa;color: #50596c;font-weight: bold;', 'data attribute.'), console.warn('%cExample:', 'background-color: #f8f9fa;color: #50596c;font-weight: bold;', '<a href="#" data-micromodal-trigger="my-modal"></a>')) }(e)), !t) return !0; for (const o in t) r(o); return !0 }, { init: function (e) { const o = Object.assign({}, { openTrigger: 'data-micromodal-trigger' }, e); const n = t(document.querySelectorAll('['.concat(o.openTrigger, ']'))); const r = (function (e, t) { const o = []; return e.forEach(function (e) { const n = e.attributes[t].value; void 0 === o[n] && (o[n] = []), o[n].push(e) }), o }(n, o.openTrigger)); if (!0 !== o.debugMode || !1 !== s(n, r)) for (const l in r) { const c = r[l]; o.targetModal = l, o.triggers = t(c), a = new i(o) } }, show: function (e, t) { const o = t || {}; o.targetModal = e, !0 === o.debugMode && !1 === r(e) || (a && a.removeEventListeners(), (a = new i(o)).showModal()) }, close: function (e) { e ? a.closeModalById(e) : a.closeModal() } }); return typeof window !== 'undefined' && (window.MicroModal = l), l }))

function xProModal(e,o){if(document.querySelector("body > .brx-body.iframe"))return;function t(e,o){let t=e;for(;t;){if(o.includes(t))return t;t=t.parentElement}return null}let r=!1,n=null;null==o.isLooping||(r=!0,n=o.isLooping,e.closest(".brxe-"+n)||null==o.isLoopingComponent||(n=o.isLoopingComponent));let s=!0,i=!1,a=new Date().getTime(),l=!!localStorage&&!!localStorage["x-"+e.id+"-last-shown-time"]&&JSON.parse(localStorage["x-"+e.id+"-last-shown-time"]);function c(o){27===o.keyCode&&xCloseModal(e.id)}function d(e,t){switch(o.show_again.type){case"never":if(!1!==l)return;break;case"after":var r=parseInt(o.show_again.options.days),n=parseInt(o.show_again.options.hours);if((a-l)/864e5<r+n/24)return;break;case"evergreen":if(document.getElementById(e).querySelector(".brxe-xcountdown")&&localStorage&&localStorage["x-countdown-"+document.getElementById(e).querySelector(".brxe-xcountdown").getAttribute("data-x-id")+"-end-times"]&&JSON.parse(localStorage["x-countdown-"+document.getElementById(e).querySelector(".brxe-xcountdown").getAttribute("data-x-id")+"-end-times"])-new Date().getTime()<=0)return}MicroModal.show(e,t)}sessionStorage&&sessionStorage["x-"+e.id+"-last-shown-time"]&&JSON.parse(sessionStorage["x-"+e.id+"-last-shown-time"])&&o.show_once_session&&(i=!0),e.addEventListener("x_modal:open",function(){"false"!==o.escToClose&&document.addEventListener("keydown",c),window.dispatchEvent(new Event("resize")),o.rawConfig.disableFocus&&e.querySelector(".x-modal_container")&&e.querySelector(".x-modal_container").focus({preventScroll:!0}),"false"!==o.hashToClose&&e.querySelectorAll("a[href*='#']:not(.menu-item-has-children > a)").forEach(o=>{o.addEventListener("click",o=>{xCloseModal(e.id)})}),e.querySelector(".brxe-xreadmoreless")&&e.querySelectorAll(".brxe-xreadmoreless").forEach(o=>{i||(o.querySelector(".x-read-more_content").style.removeProperty("height"),o.querySelector(".x-read-more_content").style.removeProperty("max-height"),o.querySelector(".x-read-more_content").classList.remove("x-read-more_not-collapsable"),setTimeout(function(){o.hasAttribute("data-x-fade")&&o.classList.add("x-read-more_fade"),window.dispatchEvent(new Event("resize")),doExtrasReadmore(e),o.style.opacity=1},100))}),e.querySelectorAll("[data-x-modal-close]").forEach(o=>{o.addEventListener("click",o=>{(!o.currentTarget.classList.contains("x-modal_backdrop")||o.target===o.currentTarget)&&xCloseModal(e.id)})}),i=!0}),e.addEventListener("x_modal:close",function(){"false"!==o.escToClose&&document.removeEventListener("keydown",c)}),Object.values(o.triggers).forEach(t=>{let a=null!=t.options.delay?t.options.delay:0,l=t.options.componentScope&&t.options.parentComponent?e.closest(".brxe-"+t.options.parentComponent):document;if("pageLoad"===t.type&&window.addEventListener("load",function(){setTimeout(function(){(!1===i||!1===o.show_once&&!1===o.show_once_session)&&d(e.id,o.rawConfig)},t.options.delay)}),"element_click"===t.type){function c(r){r.preventDefault(),e.addEventListener("x_modal:close",function(){l.querySelectorAll(t.options.selector).forEach(e=>{e.classList.contains("brxe-xburgertrigger")&&(e.setAttribute("aria-expanded","false"),e.querySelector(".x-hamburger-box").classList.remove("is-active"))})}),!1===i||!1===o.show_once&&!1===o.show_once_session?setTimeout(()=>{MicroModal.show(e.id,o.rawConfig),i=!0},a):l.querySelector(t.options.selector)&&l.querySelectorAll(t.options.selector).forEach(e=>{e.removeEventListener("click",c)})}!0===t.options.ariaControls&&(r?document===l?e.closest(".brxe-"+n).querySelectorAll(t.options.selector).forEach(o=>{o.setAttribute("aria-controls",e.id),o.hasAttribute("aria-haspopup")||o.setAttribute("aria-haspopup","dialog")}):l.querySelectorAll(t.options.selector).forEach(o=>{o.setAttribute("aria-controls",e.id),o.hasAttribute("aria-haspopup")||o.setAttribute("aria-haspopup","dialog")}):l.querySelectorAll(t.options.selector).forEach(o=>{o.setAttribute("aria-controls",e.id),o.hasAttribute("aria-haspopup")||o.setAttribute("aria-haspopup","dialog")})),l.querySelector(t.options.selector)&&(r?document===l?e.closest(".brxe-"+n).querySelectorAll(t.options.selector).forEach(e=>{e.addEventListener("click",c)}):l.querySelectorAll(t.options.selector).forEach(e=>{e.addEventListener("click",c)}):l.querySelectorAll(t.options.selector).forEach(e=>{e.addEventListener("click",c)}))}if("element_hover"===t.type){function u(){!1===i||!1===o.show_once&&!1===o.show_once_session?setTimeout(()=>{MicroModal.show(e.id,o.rawConfig),i=!0},a):l.querySelector(t.options.selector)&&(r?e.closest(".brxe-"+n).querySelector(t.options.selector).removeEventListener("mouseover",u):l.querySelector(t.options.selector).removeEventListener("mouseover",u))}l.querySelector(t.options.selector)&&(r&&document===l?e.closest(".brxe-"+n).querySelector(t.options.selector).addEventListener("mouseover",u):l.querySelector(t.options.selector).addEventListener("mouseover",u))}if("time_inactive"===t.type){var p;function f(){clearTimeout(p),p=setTimeout(function(){!0===s&&(!1===i||!1===o.show_once&&!1===o.show_once_session)&&(d(e.id,o.rawConfig),s=!1)},1e3*parseInt(t.options.time))}window.onload=f,window.onmousemove=f,window.onmousedown=f,window.ontouchstart=f,window.ontouchmove=f,window.onclick=f,window.onkeydown=f,window.addEventListener("scroll",f,!0)}if("page_views"===t.type){let h=localStorage&&localStorage["x-"+e.id+"-page-views"]?parseInt(localStorage["x-"+e.id+"-page-views"]):0;h++,localStorage&&(localStorage["x-"+e.id+"-page-views"]=h),t.options.views==h&&(localStorage&&(localStorage["x-"+e.id+"-page-views"]=0),(!1===i||!1===o.show_once&&!1===o.show_once_session)&&d(e.id,o.rawConfig))}if("pageScroll"===t.type){let m,x=!1,y=function(){!x&&(x=!0,setTimeout(()=>{(m=~~window.pageYOffset)>=parseInt(t.options.scrollAmount)&&((!1===i||!1===o.show_once&&!1===o.show_once_session)&&d(e.id,o.rawConfig),document.removeEventListener("scroll",y)),x=!1},100))};document.addEventListener("scroll",y)}if("scrolled_to_element"===t.type&&l.querySelector(t.options.selector)){let w=new IntersectionObserver(function(t,r){t.forEach(t=>{0!=t.intersectionRatio&&(!1===i||!1===o.show_once&&!1===o.show_once_session?(r.unobserve(t.target),setTimeout(()=>{d(e.id,o.rawConfig)},a)):r.unobserve(t.target))})});w.observe(l.querySelector(t.options.selector))}if("exitIntent"===t.type&&s&&document.documentElement.addEventListener("mouseleave",t=>{t.toElement||t.relatedTarget||!s||!1!==i&&(!1!==o.show_once||!1!==o.show_once_session)||(d(e.id,o.rawConfig),s=!1)}),"pageLoadQuery"===t.type){let g=window.location.search;g.includes(t.options.params)&&setTimeout(function(){(!1===i||!1===o.show_once&&!1===o.show_once_session)&&d(e.id,o.rawConfig)},t.options.delay)}}),localStorage&&(localStorage["x-"+e.id+"-last-shown-time"]=JSON.stringify(a)),o.show_once_session&&sessionStorage&&(sessionStorage["x-"+e.id+"-last-shown-time"]=JSON.stringify(a)),e.setAttribute("data-x-ready","true")}function xProModalConfig(e,o={}){let t=e.getAttribute("data-x-modal"),r=t?JSON.parse(t):{};return r.rawConfig.onShow=function(e){e.dispatchEvent(new Event("x_modal:open")),r.rawConfig.disableScroll&&"undefined"!=typeof lenis&&lenis.stop()},r.rawConfig.onClose=function(e){e.dispatchEvent(new Event("x_modal:close")),r.rawConfig.disableScroll&&"undefined"!=typeof lenis&&lenis.start(),e.querySelectorAll("iframe:not(media-provider iframe)").forEach(e=>{e.src=e.src}),e.querySelectorAll("media-player").forEach(e=>{e&&"function"==typeof e.pause&&e.pause()}),e.querySelectorAll("video:not(media-provider video)").forEach(e=>{e.pause()}),"true"===r.resetForms&&e.querySelectorAll("form").forEach(e=>{e.reset()})},r}function xOpenModal(e){document.getElementById(e);let o=document.getElementById(e).getAttribute("data-x-modal"),t=o?JSON.parse(o):{};return t.rawConfig.onShow=function(e){e.dispatchEvent(new Event("x_modal:open"))},t.rawConfig.onClose=function(e){e.dispatchEvent(new Event("x_modal:close"))},MicroModal.show(e,t.rawConfig)}function xCloseModal(e){let o=document.getElementById(e),t=o.getAttribute("data-x-modal"),r=t?JSON.parse(t):{};return MicroModal.close(e,r.rawConfig)}document.addEventListener("DOMContentLoaded",function(e){if(!bricksIsFrontend)return;let o=function(e,o=!1){let t=e.querySelectorAll(".x-modal");t.forEach(e=>{!(!o&&e.hasAttribute("data-x-ready"))&&(""===e.id&&e.setAttribute("id","x-modal_"+e.getAttribute("data-x-id")),e.querySelector(".brxe-xreadmoreless")&&(e.querySelector(".brxe-xreadmoreless").style.opacity=0),xProModal(e,xProModalConfig(e)),xProModalConfig(e).customAriaLabel?e.querySelector(".x-modal_container").setAttribute("aria-label",xProModalConfig(e).customAriaLabel):e.querySelector("h1,h2,h3,h4,h6")?e.querySelectorAll("h1,h2,h3,h4,h6").forEach((o,t)=>{0===t&&(o.getAttribute("id")?e.querySelector(".x-modal_container").setAttribute("aria-labelledby",o.getAttribute("id")):e.querySelector(".x-modal_container").setAttribute("aria-label",o.innerText))}):e.querySelector(".x-modal_container").setAttribute("aria-label","modal"))})};o(document),xExtrasRegisterAJAXHandler("doExtrasModal"),window.doExtrasModal=o,window.xOpenModal=xOpenModal,window.xCloseModal=xCloseModal,"undefined"!=typeof bricksextras&&(bricksextras.modal={close(e){let o=e?.target||!1;o&&xCloseModal(o.id)},open(e){let o=e?.target||!1;o&&xOpenModal(o.id)}})});