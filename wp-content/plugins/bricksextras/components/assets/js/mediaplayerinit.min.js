function xAddMediaPlayerScripts(){if(document.getElementById("x-vidstack-js")||document.getElementById("x-media-player-js")){"function"==typeof xDoMediaPlayer&&xDoMediaPlayer();return}if(customElements.get("media-player")){console.log("BricksExtras: Vidstack already loaded, loading player script only");var e=document.createElement("script");e.id="x-media-player-js",e.src=xMediaPlayer.pluginDir+"js/mediaplayer.min.js?ver="+(xMediaPlayer.version||"1.0.1"),document.head.appendChild(e),e.onload=function(){setTimeout(()=>{"function"==typeof xDoMediaPlayer&&xDoMediaPlayer()},"0")};return}var i=document.createElement("script");i.type="module",i.id="x-vidstack-js",i.src=xMediaPlayer.pluginDir+"vidstack/dist/assets/vidstack.js",document.head.appendChild(i);var e=document.createElement("script");e.id="x-media-player-js",e.src=xMediaPlayer.pluginDir+"js/mediaplayer.min.js?ver="+(xMediaPlayer.version||"1.0.1"),document.head.appendChild(e),e.onload=function(){customElements.whenDefined("media-player").then(()=>{setTimeout(()=>{if(xDoMediaPlayer(),"undefined"==typeof Popper){let e=document.createElement("script");e.src=xMediaPlayer.pluginDir+"js/popper.js",e.onload=function(){let e=document.createElement("script");e.src=xMediaPlayer.pluginDir+"js/mediaplayertooltips.min.js",document.head.appendChild(e)},document.head.appendChild(e)}else{let i=document.createElement("script");i.src=xMediaPlayer.pluginDir+"js/mediaplayertooltips.min.js",document.head.appendChild(i)}},"0")})}}function xDoMediaPlayerLoad(){let e=document.querySelectorAll(".brxe-xmediaplayer, .brxe-xmediaplayeraudio"),i=!1;e.forEach(e=>{let a=(a,r)=>{for(let t of a)t.isIntersecting&&(r.unobserve(e),i||(xAddMediaPlayerScripts(),i=!0))},r=new IntersectionObserver(a,{root:null,rootMargin:"0px 0px 500px 0px",threshold:0});r.observe(e)})}document.addEventListener("x_media_player:init",()=>{bricksIsFrontend&&xDoMediaPlayerLoad()}),document.addEventListener("DOMContentLoaded",()=>{document.dispatchEvent(new Event("x_media_player:init"))});